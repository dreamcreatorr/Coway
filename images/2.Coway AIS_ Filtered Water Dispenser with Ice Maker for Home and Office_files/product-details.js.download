(function () {

    var $document = $(document),
        $technologyCta = $('.technology-item .cta'),
        $technologyContent = $('.technology-content'),
        $contentClose = $('.technology-content .btn-close-blue');

    $technologyCta.on('click', function(e) {
        var target = $(this).attr('data-id');
        $technologyContent.addClass('hidden');
        $(target).fadeIn().removeClass('hidden');
        if($(this).hasClass('open')) {

        }
    });

    $contentClose.on('click', function(e) {
        e.preventDefault;
        $technologyContent.addClass('hidden');
    });

    $document.on("click", ".technology-content .btn-close-blue", function (e) {
        var id = $(this).attr("href");
        if ($(id).length > 0) {
            e.preventDefault();
            globalController.scrollTo(id);
            $('.technology-item .cta').removeClass('open');
        }
    });

    $document.on("click", ".technology-item .cta", function (e) {
        var id = $(this).attr("href");
        if ($(id).length > 0) {
            e.preventDefault();
            var topY = $(id).offset().top;
            TweenMax.to(window,0.5,{scrollTo:{y: topY - 90}});
            $('.technology-item .cta').removeClass('open');
            $(this).addClass('open');
        };
    });

    $(".design-slider").slick({
        infinite: true,
        dots: true,
        speed: 200,
        fade: true
    });

    $(".gallery-slider").slick({
        infinite: true,
        dots: true,
        speed: 200,
        prevArrow: '<button type="button" class="slick-prev slick-arrow"><img src="/img/icon-arrow-left.png" class="img-responsive" alt="Nav Left" /></button>',
        nextArrow: '<button type="button" class="slick-next slick-arrow"><img src="/img/icon-arrow-right.png" class="img-responsive" alt="Nav Right" /></button>'
    });

    $('.cody-slider').slick({
        dots: false,
        infinite: false,
        speed: 200,
        slidesToShow: 5,
        slidesToScroll: 5,
        dots: true,
        responsive: [
            {
                breakpoint: 991,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 3,
                    infinite: true,
                    dots: true
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 1,
                    infinite: true,
                    dots: true
                }
            },
            {
                breakpoint: 600,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 2,
                    infinite: true,
                    dots: true
                }
            },
            {
                breakpoint: 460,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    infinite: true,
                    dots: true
                }
            }
        ]
    });

    $('.specs-and-price .btn-rounded').on('click', function(e) {
        var tab = e.target.hash;
        e.preventDefault();
        $('li > a[href="' + tab + '"]').tab("show");
    });

    if(!Modernizr.touch) {
        $('.product-main .details-name .label-default').hover(function (){
            var $this = $(this),
                $data = $this.attr('data-fullname');
                $dataReset = $this.attr('data-original');
                $label = $this;

            var $animateIn = $label.html($data);
            TweenMax.to($animateIn, 0.3, { y:"2px" , ease:Power1.easeInOut });
        }, function() {
            var $animateOut = $label.html($dataReset);
            TweenMax.to($animateOut, 0.3, { y:"-2px" , ease:Power1.easeInOut });
        });
        
        $('.item-listing .cta').hover(function (){
            var $this = $(this),
                $data = $this.find('.label-default').attr('data-fullname');
                $dataReset = $this.find('.label-default').html();
                $label = $this.find('.label-default');

            var $animateIn = $label.html($data);
            TweenMax.set($animateIn, { opacity: 0 });

            TweenMax.to($animateIn, 0.8, { y:"2px", opacity: 1, ease:Power1.easeInOut });
        }, function() {
            var $animateOut = $label.html($dataReset);
            TweenMax.to($animateOut, 0.8, { y:"-2px", ease:Power1.easeOut });
        });

        // Create a main timeline
        var $box = $('.design-item .item-child'),
            $boxImg = $('.design-item .item-child .img'),
            mainTl = new TimelineMax({
                    yoyo: true,
                    repeat: -1,
                    repeatDelay: 2,
                    // delay: 1
            });

        TweenMax.set($boxImg, {opacity: 0, rotation: 5});

        $box.each(function(index, element){
            var $box = $(this).find('.img'),
                boxTl = new TimelineMax();

            boxTl.to($box, 1, {opacity: 1, rotation: 0, ease:Circ.easeOut});
            mainTl.add(boxTl);
        });

    }  

}());
